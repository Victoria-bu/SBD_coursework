<!DOCTYPE html>
<html>
<head><title>Реєстрація</title></head>
<body>
  <h2>Реєстрація</h2>
  <form method="post">
    <h3>Дані для входу:</h3>
    <input type="text" name="username" placeholder="Ім'я користувача" required><br>
    <input type="password" name="password" placeholder="Пароль" required><br>
    
    <h3>Ваші дані як мешканця:</h3>
    <input type="text" name="full_name" placeholder="Ваше ПІБ (як у базі даних)" required><br>
    <small>Введіть точно так, як записано в системі</small><br><br>
    
    <!-- Тільки адміни можуть вибирати роль -->
    {% if current_user.is_authenticated and current_user.role == 'admin' %}
    <select name="role">
      <option value="user">Користувач</option>
      <option value="admin">Адміністратор</option>
    </select><br>
    {% else %}
    <input type="hidden" name="role" value="user">
    {% endif %}
    
    <button type="submit">Зареєструватися</button>
  </form>
  <p>Вже є акаунт? <a href="{{ url_for('login') }}">Увійти</a></p>
  {% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul>
    {% for msg in messages %}
      <li>{{ msg }}</li>
    {% endfor %}
    </ul>
  {% endif %}
  {% endwith %}
</body>
</html>